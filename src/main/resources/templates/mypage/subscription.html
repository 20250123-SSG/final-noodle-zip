<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:replace="~{fragments/head :: head}"></th:block>
  <link th:href="@{/admin_section/css/admin.css}" rel="stylesheet">

  <!-- SPECIFIC CSS -->
  <link th:href="@{/css/subscription.css}" rel="stylesheet">

  <!-- 모바일 안됨 -->

</head>
<body>
<div th:replace="~{fragments/subHeader :: subHeader}"></div>

  <main style="margin-top: 100px; margin-bottom: 100px">
    <div>
      <div class="container-fluid">
        <div class="box_general">
          <div class="header_box">
            <a th:classappend="${list.subscriptionType.name() == 'FOLLOWER'} ? ' active' : ''"
               th:href="@{/users/{userId}/follower(userId=${userAccessInfo.targetUserId})}">
              구독자
            </a>
            |
            <a th:classappend="${list.subscriptionType.name() == 'FOLLOWING'} ? ' active' : ''"
               th:href="@{/users/{userId}/following(userId=${userAccessInfo.targetUserId})}">
              구독중
            </a>
          </div>
          <div class="list_general">
            <ul>
              <li th:each="item : ${list.subscriptionList}">
                <figure>
                  <img th:src="${item.profileImageUrl}" alt="profile">
                </figure>
                <small th:text="'ID: ' + ${item.loginId}"></small>
                <h4>
                  <a th:href="@{/users/{userId}/mypage(userId=${item.userId})}"
                     th:text="${item.name}">Name</a>
                </h4>
                <ul class="buttons">
                  <li th:if="${userAccessInfo.requestUserId != null and userAccessInfo.requestUserId != item.userId}">
                    <a href="#0"
                       class="btn_1 gray subscribe-btn"
                       th:data-userId="${item.userId}"
                       th:data-subscribed="${item.isSubscribed}"
                       th:text="${item.isSubscribed} ? '구독 취소' : '구독'">
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="pagination_fg" th:if="${list.totalPage > 0}">
        <a th:href="@{|?page=${list.page > 1 ? list.page - 1 : 1}|}"
           th:classappend="${list.page == 1} ? ' disabled' : ''">
          &laquo;
        </a>
        <a th:each="i : ${#numbers.sequence(list.beginPage, list.endPage)}"
           th:href="@{|?page=${i}|}"
           th:text="${i}"
           th:classappend="${list.page == i} ? ' active' : ''"></a>
        <a th:href="@{|?page=${list.page < list.totalPage ? list.page + 1 : list.totalPage}|}"
           th:classappend="${list.page == list.totalPage} ? ' disabled' : ''">
          &raquo;
        </a>
      </div>
    </div>
  </main>

  <script src="/js/common_scripts.min.js"></script>
  <script src="/js/common_func.js"></script>
  <script src="/assets/validate.js"></script>
  <script src="/js/subscription.js"></script>

</body>
</html>