<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
>

<!-- store/fragments/tab-review.html -->
<div th:fragment="review-tab">
  <!-- ✅ 리뷰 평균 영역 -->
  <div class="row add_bottom_45 d-flex align-items-center">
    <div class="col-md-3">
      <div id="review_summary">
        <strong th:text="${summary.overall}">8.0</strong>
        <em>리뷰 요약</em>
        <small th:text="'총 ' + ${summary.totalCount} + '건의 리뷰 기준'">Based on n reviews</small>
      </div>
    </div>
    <div class="col-md-9 reviews_sum_details">
      <div class="row">
        <div class="col-md-6">
          <h6>면 굵기</h6>
          <div class="row">
            <div class="col-10">
              <div class="progress">
                <div class="progress-bar" role="progressbar"
                     th:style="'width:' + ${summary.noodleThickness * 10} + '%'"
                     th:attr="aria-valuenow=${summary.noodleThickness * 10}">
                </div>
              </div>
            </div>
            <div class="col-2"><strong th:text="${summary.noodleThickness}">-</strong></div>
          </div>

          <h6>면 식감</h6>
          <div class="row">
            <div class="col-10">
              <div class="progress">
                <div class="progress-bar" role="progressbar"
                     th:style="'width:' + ${summary.noodleTexture * 10} + '%'"
                     th:attr="aria-valuenow=${summary.noodleTexture * 10}">
                </div>
              </div>
            </div>
            <div class="col-2"><strong th:text="${summary.noodleTexture}">-</strong></div>
          </div>
        </div>
        <div class="col-md-6">
          <h6>국물 염도</h6>
          <div class="row">
            <div class="col-10">
              <div class="progress">
                <div class="progress-bar" role="progressbar"
                     th:style="'width:' + ${summary.soupSaltiness * 10} + '%'"
                     th:attr="aria-valuenow=${summary.soupSaltiness * 10}">
                </div>
              </div>
            </div>
            <div class="col-2"><strong th:text="${summary.soupSaltiness}">-</strong></div>
          </div>

          <h6>국물 매운맛</h6>
          <div class="row">
            <div class="col-10">
              <div class="progress">
                <div class="progress-bar" role="progressbar"
                     th:style="'width:' + ${summary.soupSpicinessLevel * 10} + '%'"
                     th:attr="aria-valuenow=${summary.soupSpicinessLevel * 10}">
                </div>
              </div>
            </div>
            <div class="col-2"><strong th:text="${summary.soupSpicinessLevel}">-</strong></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ 리뷰 카드 목록 -->
  <div id="reviews">
    <div class="review_card" th:each="review : ${reviewList}">
      <div class="row">
        <div class="col-md-2 user_info">
          <figure>
            <img th:src="${review.reviewImageUrl != null ? review.reviewImageUrl : '/img/avatar.jpg'}"
                 onerror="this.onerror=null;this.src='/img/avatar.jpg'" alt="review image">
          </figure>
          <h5 th:text="${review.menuName}">메뉴명</h5>
        </div>
        <div class="col-md-10 review_content">
          <div class="clearfix add_bottom_15">
            <em th:text="'리뷰 ID: ' + ${review.id}">작성일</em>
            <span th:if="${review.isReceiptReview}" class="badge bg-success ms-2">영수증 인증</span>
          </div>
          <h4 th:text="${review.soupFlavorKeywords}">맛 키워드</h4>
          <p th:text="${review.content}">리뷰 본문</p>
          <ul class="mt-2">
            <li th:each="t : ${review.toppingNames}" th:text="t">토핑</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- 더보기 버튼 -->
  <div id="load-more-review-wrapper" class="text-center mt-3" th:if="${hasMore}">
    <button id="load-more-review-btn" class="btn btn-outline-primary" data-next-page="2">더보기</button>
  </div>

</div>

<!-- 더보기로 붙일 부분 -->
<div th:fragment="moreReviews">
  <div th:each="review : ${reviewList}" class="review_card">
    <!-- reviewCard 내용 -->
  </div>
  <div id="load-more-review-wrapper" class="text-center mt-3" th:if="${hasMore}">
    <button id="load-more-review-btn" class="btn btn-outline-primary" th:attr="data-next-page=${param.page + 1}">더보기</button>
  </div>
</div>


</html>